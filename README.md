# 图片查看（支持raw图）

## 基本功能
- 支持图片滚轮缩放，鼠标拖拽
- 支持Unpacked10类型raw图分别基于QImage与OpenCV显示
- 基于OpenCV实现OpenCV对图像进行操作
  - 转灰度图
  - 边缘检测
  - 高斯模糊
  - 圆点检测
  - 二值化
  - 亮度对比度调节
  - 图片保存

## 更新记录

### 版本v1.0.0
- raw图查看（仅支持Unpacked 10格式）
- 支持调用OpenCV显示以及QImage直接显示，调用OpenCV可支持GRBG显色，QImage支持16位显示
![](https://img2024.cnblogs.com/blog/2734270/202502/2734270-20250224104147220-470295297.png)

### 版本v1.0.1
- 新增界面支持显示图片信息，包括图片宽高，识别到的圆点坐标及半径；
- 修改文件读取方式为QFile以支持中文路径；
- 新增文件后缀识别，以支持png、jpg格式图片显示；
- cv灰度图显示增加高斯模糊操作，为其他cv操作提供便利；
- 增加圆点检测，通过霍夫圆检测函数cv::HoughCircles，检测圆点返回圆点的列表；
- 通过计算出圆点的中心点，再利用向量叉积（夹角小于90大于0，大于90小于0）（cos性质）对圆点按顺时针排序，便于找出对角线的两个点；
- 利用cv::circle、cv::line和cv::putText以及cv::norm(pt1 - pt2)计算的距离，绘制出对应的圆点与对角线；
![](https://img2024.cnblogs.com/blog/2734270/202502/2734270-20250226142853579-790030140.png)

### 版本v1.0.2
- 修复图片显示区域ImgLabel，图片能够拖拽出屏幕；修复图片放大后拖拽卡顿问题。
	- 增加函数clampDrawPosition() 用来卡控图片位置的合理性，计算出图片绘制起点可在的最大值和最小值，通过qBound()进行卡控
	- 修改图片拖拽渲染方式，原每次拖拽都会对图片进行缩放计算，增加一个图片缓存，用于存储图片，当没有缩放操作时，始终使用缓存图片进行拖拽操作。

- 删除以Qt16位灰度显示图片
- 修改原始cv::mat的存储改为单独存储为img_mat_root，灰度图另外存储
- 修改霍夫圆检测前高斯处理，改为当场对灰度图作高斯处理（为适配jpg、png图片，高斯处理图非灰度图）

- 修改原GRBG显示按钮，改为cv部分的原图按钮
- Qt操作按钮部分去除Qt16位，8位改为原图

- ImgLabel新增快捷键支持，包括wasd和小键盘上下左右移动图片（放大后反向），Ctrl加滚轮放大缩小倍数提升
- 工具新增jpg、png格式图片显示支持
- 增加了QImag到cv::mat的转换函数支持各种类型转换到cv类型（qImageToCVMat()）
- 增加初始化操作，在切换图片时，释放上一张图片的缓存
- 新增按钮：灰度图、高斯模糊、边缘检测
- 新增对jpg、png格式图片的cv操作支持
![](https://img2024.cnblogs.com/blog/2734270/202502/2734270-20250226143002970-1396435423.png)

### 版本v1.0.3
- 增加窗口标题显示版本
- 修改界面中cv按钮部分，改为分页展示
- 增加保存当前展示图片功能
- 增加更改图片亮度与对比度
- 增加了图片二值化（0或255）与反二值化
![](https://img2024.cnblogs.com/blog/2734270/202502/2734270-20250227154339650-1616857439.png)

### 版本v1.0.4
- 新增亮度对比度调节功能，支持滑块调节
- 新增分辨率缩放，包括邻近算法、双线性插值、高斯金字塔与拉普拉斯金字塔缩放
- 修改界面显示，将原本的cv操作放到tableWidget中，分页展示
- 新增图片融合，支持图片缩略图展示
- 新增图片旋转与镜像，在原图的基础上进行（直接修改原图）
- 增加复位操作中对各个值的初始化（包括亮度、对比度、缩放倍数等）
![](https://img2024.cnblogs.com/blog/2734270/202502/2734270-20250228160954933-469088029.png)
